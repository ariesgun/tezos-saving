(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{138:function(e,t){},190:function(e,t,n){},196:function(e,t){},198:function(e,t){},261:function(e,t){},263:function(e,t){},273:function(e,t){},275:function(e,t){},287:function(e,t,n){},309:function(e,t){},311:function(e,t){},312:function(e,t){},317:function(e,t){},319:function(e,t){},338:function(e,t){},350:function(e,t){},353:function(e,t){},374:function(e,t,n){"use strict";n.r(t);var s,a=n(19),c=n.n(a),r=n(181),i=n.n(r),o=(n(190),n(17)),l=n(46),j=(n(287),n(4)),d=n(36),u=n(0),b=n.n(u),p=n(183),h=n(13),x=n(1),O=function(e){var t=e.Tezos,n=e.setContract,s=e.setWallet,c=e.setUserAddress,r=e.setUserBalance,i=e.setStorage,o=e.contractAddress,l=e.setBeaconConnection,u=e.setPublicToken,O=e.setPlayerStatus,f=e.wallet,m=function(){var e=Object(d.a)(b.a.mark((function e(s){var a,l,j,d;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(s),e.next=3,t.tz.getBalance(s);case 3:return a=e.sent,r(a.toNumber()),e.next=7,t.wallet.at(o);case 7:return l=e.sent,e.next=10,l.storage();case 10:return j=e.sent,console.log("storage ",j),n(l),i(j),e.next=16,j.players_status.get(s);case 16:d=e.sent,O(d);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.requestPermissions({network:{type:h.p.ITHACANET,rpcUrl:"https://rpc.ithacanet.teztnets.xyz"}});case 3:return e.next=5,f.getPKH();case 5:return t=e.sent,e.next=8,m(t);case 8:l(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){Object(d.a)(b.a.mark((function e(){var n,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new p.a({name:"Taquito Boilerplate",preferredNetwork:h.p.ITHACANET,disableDefaultEvents:!0,eventHandlers:(n={},Object(j.a)(n,h.e.PAIR_INIT,{handler:h.K.PAIR_INIT}),Object(j.a)(n,h.e.PAIR_SUCCESS,{handler:function(e){return u(e.publicKey)}}),n)}),t.setWalletProvider(a),s(a),e.next=5,a.client.getActiveAccount();case 5:if(!e.sent){e.next=13;break}return e.next=9,a.getPKH();case 9:return c=e.sent,e.next=12,m(c);case 12:l(!0);case 13:case"end":return e.stop()}}),e)})))()}),[]),Object(x.jsx)("div",{className:"buttons",children:Object(x.jsx)("button",{className:"button",onClick:g,children:Object(x.jsxs)("span",{children:[Object(x.jsx)("i",{className:"fas fa-wallet"}),"\xa0 Connect with wallet"]})})})},f=function(e){var t=e.wallet,n=e.setPublicToken,s=e.setUserAddress,a=e.setUserBalance,c=e.setWallet,r=e.setTezos,i=e.setBeaconConnection,o=function(){var e=Object(d.a)(b.a.mark((function e(){var o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(""),a(0),c(null),o=new l.a("https://rpc.ithacanet.teztnets.xyz"),r(o),i(!1),n(null),console.log("disconnecting wallet"),!t){e.next=15;break}return e.next=11,t.client.removeAllAccounts();case 11:return e.next=13,t.client.removeAllPeers();case 13:return e.next=15,t.client.destroy();case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"buttons",children:Object(x.jsxs)("button",{className:"button",onClick:o,children:[Object(x.jsx)("i",{className:"fas fa-times"}),"\xa0 Disconnect wallet"]})})},m=n(75),g=n.n(m),v=function(e){var t=e.contract,n=e.setUserBalance,s=e.Tezos,c=e.userAddress,r=e.setStorage,i=Object(a.useState)(!1),l=Object(o.a)(i,2),j=l[0],u=l[1],p=Object(a.useState)(!1),h=Object(o.a)(p,2),O=h[0],f=h[1],m=Object(a.useState)(!1),g=Object(o.a)(m,2),v=g[0],w=g[1],N=function(){var e=Object(d.a)(b.a.mark((function e(){var a,i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,t.storage();case 4:return a=e.sent,e.next=7,t.methods.deposit().send({amount:a.req_deposit.toNumber()/1e6});case 7:return i=e.sent,e.next=10,i.confirmation();case 10:return e.next=12,t.storage();case 12:return(o=e.sent)&&r(o),e.t0=n,e.next=17,s.tz.getBalance(c);case 17:e.t1=e.sent,(0,e.t0)(e.t1),e.next=24;break;case 21:e.prev=21,e.t2=e.catch(1),console.log(e.t2);case 24:return e.prev=24,u(!1),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[1,21,24,27]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(b.a.mark((function e(){var a,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,e.next=4,t.methods.earlyWithdraw().send();case 4:return a=e.sent,e.next=7,a.confirmation();case 7:return e.next=9,t.storage();case 9:return(i=e.sent)&&r(i),e.t0=n,e.next=14,s.tz.getBalance(c);case 14:e.t1=e.sent,(0,e.t0)(e.t1),e.next=21;break;case 18:e.prev=18,e.t2=e.catch(1),console.log(e.t2);case 21:return e.prev=21,f(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[1,18,21,24]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(d.a)(b.a.mark((function e(){var a,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.next=4,t.methods.update().send();case 4:return a=e.sent,e.next=7,a.confirmation();case 7:return e.next=9,t.storage();case 9:return(i=e.sent)&&r(i),e.t0=n,e.next=14,s.tz.getBalance(c);case 14:e.t1=e.sent,(0,e.t0)(e.t1),e.next=21;break;case 18:e.prev=18,e.t2=e.catch(1),console.log(e.t2);case 21:return e.prev=21,w(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[1,18,21,24]])})));return function(){return e.apply(this,arguments)}}();return t||c?Object(x.jsxs)("div",{className:"buttons",children:[Object(x.jsx)("button",{className:"button",disabled:j,onClick:N,children:j?Object(x.jsxs)("span",{children:[Object(x.jsx)("i",{className:"fas fa-spinner fa-spin"}),"\xa0 Please wait"]}):Object(x.jsxs)("span",{children:[Object(x.jsx)("i",{className:"fas fa-plus"}),"\xa0 Deposit Tezos"]})}),Object(x.jsx)("button",{className:"button",disabled:O,onClick:S,children:O?Object(x.jsxs)("span",{children:[Object(x.jsx)("i",{className:"fas fa-spinner fa-spin"}),"\xa0 Please wait"]}):Object(x.jsxs)("span",{children:[Object(x.jsx)("i",{className:"fas fa-minus"}),"\xa0 Early Withdraw"]})}),Object(x.jsx)("button",{className:"button",disabled:v,onClick:T,children:v?Object(x.jsxs)("span",{children:[Object(x.jsx)("i",{className:"fas fa-spinner fa-spin"}),"\xa0 Please wait"]}):Object(x.jsxs)("span",{children:[Object(x.jsx)("i",{className:"fas fa-minus"}),"\xa0 Refresh Status"]})})]}):Object(x.jsx)("div",{children:"\xa0"})};!function(e){e.NONE="",e.LISTENING="Listening to P2P channel",e.CONNECTED="Channel connected",e.PERMISSION_REQUEST_SENT="Permission request sent, waiting for response",e.PERMISSION_REQUEST_SUCCESS="Wallet is connected"}(s||(s={}));var w=function(){var e=Object(a.useState)(new l.a("https://rpc.ithacanet.teztnets.xyz")),t=Object(o.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(void 0),r=Object(o.a)(c,2),i=r[0],j=r[1],d=Object(a.useState)(""),u=Object(o.a)(d,2),b=u[0],p=u[1],h=Object(a.useState)(null),m=Object(o.a)(h,2),w=m[0],N=m[1],S=Object(a.useState)(""),T=Object(o.a)(S,2),y=T[0],k=T[1],P=Object(a.useState)(0),A=Object(o.a)(P,2),B=A[0],C=A[1],U=Object(a.useState)(),q=Object(o.a)(U,2),I=q[0],z=q[1],E=Object(a.useState)("..."),_=Object(o.a)(E,2),W=_[0],D=_[1],L=Object(a.useState)(!1),R=Object(o.a)(L,2),H=R[0],K=R[1],M=Object(a.useState)(!1),G=Object(o.a)(M,2),J=G[0],Q=G[1],F=Object(a.useState)("transfer"),Y=Object(o.a)(F,2),V=Y[0],Z=Y[1],$="KT1Wt7eoGoxWsEnBDaQ9YLnsvV5ZqJuiFMfc";return!b||y&&!isNaN(B)?y&&!isNaN(B)?Object(x.jsxs)("div",{className:"main-box",children:[Object(x.jsx)("h1",{children:"Taquito Boilerplate"}),Object(x.jsx)("div",{id:"tabs",children:Object(x.jsx)("div",{id:"contract",className:"contract"===V?"active":"",onClick:function(){return Z("contract")},children:"Interact with a contract"})}),Object(x.jsxs)("div",{id:"dialog",children:[Object(x.jsxs)("div",{id:"content",children:[Object(x.jsxs)("div",{id:"increment-decrement",children:[Object(x.jsxs)("h3",{className:"text-align-center",children:["Current players: ",Object(x.jsxs)("span",{children:[I?I.players.length:0," "]})]}),Object(x.jsxs)("h3",{className:"text-align-center",children:["Your Status: ",Object(x.jsxs)("span",{children:[W?W.hasOwnProperty("winning")?"Winning":W.hasOwnProperty("waiting")?"Waiting":W.hasOwnProperty("failed")?"Failed":"Waiting":"Waiting"," "]})]}),Object(x.jsx)(v,{contract:i,setUserBalance:C,Tezos:n,userAddress:y,setStorage:z})]}),Object(x.jsxs)("p",{children:["Rewards:",Object(x.jsx)("i",{className:"far fa-address-card"}),"\xa0",Object(x.jsxs)("span",{children:[I?(I.rewards.toNumber()/1e6).toLocaleString("en-US"):0," \ua729"]})]}),Object(x.jsxs)("p",{children:["Start Date:",Object(x.jsx)("i",{className:"far fa-address-card"}),"\xa0",Object(x.jsxs)("span",{children:[I?new Date(Date.parse(I.start_date)).toLocaleString("en-US"):""," "]})]}),Object(x.jsxs)("p",{children:["Rounds:",Object(x.jsx)("i",{className:"far fa-address-card"}),"\xa0",Object(x.jsxs)("span",{children:[I?I.total_rounds.toNumber():""," "]})]}),Object(x.jsxs)("p",{children:["Period Length:",Object(x.jsx)("i",{className:"far fa-address-card"}),"\xa0",Object(x.jsxs)("span",{children:[I?I.period.toNumber():""," "]})]}),Object(x.jsxs)("p",{children:["Players:",Object(x.jsx)("i",{className:"far fa-address-card"}),"\xa0 ",y]}),Object(x.jsxs)("p",{children:["Required Deposit:",Object(x.jsx)("i",{className:"far fa-address-card"}),"\xa0",Object(x.jsxs)("span",{children:[I?(I.req_deposit.toNumber()/1e6).toLocaleString("en-US"):0," \ua729"]})]}),Object(x.jsxs)("p",{children:["Total Deposit:",Object(x.jsx)("i",{className:"far fa-address-card"}),"\xa0",Object(x.jsxs)("span",{children:[I?(I.total_deposit.toNumber()/1e6).toLocaleString("en-US"):0," \ua729"]})]}),Object(x.jsxs)("p",{children:["Contract Address:",Object(x.jsx)("i",{className:"far fa-file-code"}),"\xa0",Object(x.jsx)("a",{href:"https://better-call.dev/ithacanet/".concat($,"/operations"),target:"_blank",rel:"noopener noreferrer",children:$})]}),Object(x.jsxs)("p",{children:["User Address:",Object(x.jsx)("i",{className:"far fa-address-card"}),"\xa0 ",y]}),Object(x.jsxs)("p",{children:["User Balance:",Object(x.jsx)("i",{className:"fas fa-piggy-bank"}),"\xa0",(B/1e6).toLocaleString("en-US")," \ua729"]})]}),Object(x.jsx)(f,{wallet:w,setPublicToken:p,setUserAddress:k,setUserBalance:C,setWallet:N,setTezos:s,setBeaconConnection:Q})]}),Object(x.jsx)("div",{id:"footer",children:Object(x.jsx)("img",{src:"built-with-taquito.png",alt:"Built with Taquito"})})]}):b||y||B?Object(x.jsx)("div",{children:"An error has occurred"}):Object(x.jsxs)("div",{className:"main-box",children:[Object(x.jsxs)("div",{className:"title",children:[Object(x.jsx)("h1",{children:"Taquito Boilerplate"}),Object(x.jsx)("a",{href:"https://app.netlify.com/start/deploy?repository=https://github.com/ecadlabs/taquito-boilerplate",children:Object(x.jsx)("img",{src:"https://www.netlify.com/img/deploy/button.svg",alt:"netlify-button"})})]}),Object(x.jsxs)("div",{id:"dialog",children:[Object(x.jsx)("header",{children:"Welcome to Taquito Boilerplate App!"}),Object(x.jsxs)("div",{id:"content",children:[Object(x.jsx)("p",{children:"Hello!"}),Object(x.jsxs)("p",{children:["This is a template Tezos dApp built using Taquito. It's a starting point for you to hack on and build your own dApp for Tezos.",Object(x.jsx)("br",{}),"If you have not done so already, go to the"," ",Object(x.jsx)("a",{href:"https://github.com/ecadlabs/taquito-boilerplate",target:"_blank",rel:"noopener noreferrer",children:"Taquito boilerplate Github page"})," ","and click the ",Object(x.jsx)("em",{children:'"Use this template"'})," button."]}),Object(x.jsx)("p",{children:"Go forth and Tezos!"})]}),Object(x.jsx)(O,{Tezos:n,setContract:j,setPublicToken:p,setWallet:N,setUserAddress:k,setUserBalance:C,setStorage:z,contractAddress:$,setBeaconConnection:Q,setPlayerStatus:D,wallet:w})]}),Object(x.jsx)("div",{id:"footer",children:Object(x.jsx)("img",{src:"built-with-taquito.png",alt:"Built with Taquito"})})]}):Object(x.jsxs)("div",{className:"main-box",children:[Object(x.jsx)("h1",{children:"Taquito Boilerplate"}),Object(x.jsxs)("div",{id:"dialog",children:[Object(x.jsx)("header",{children:"Try the Taquito Boilerplate App!"}),Object(x.jsxs)("div",{id:"content",children:[Object(x.jsxs)("p",{className:"text-align-center",children:[Object(x.jsx)("i",{className:"fas fa-broadcast-tower"}),"\xa0 Connecting to your wallet"]}),Object(x.jsx)("div",{dangerouslySetInnerHTML:function(){var e=g()(0,"L");return e.addData(b||""),e.make(),{__html:e.createImgTag(4)}}(),className:"text-align-center"}),Object(x.jsxs)("p",{id:"public-token",children:[H?Object(x.jsx)("span",{id:"public-token-copy__copied",children:Object(x.jsx)("i",{className:"far fa-thumbs-up"})}):Object(x.jsx)("span",{id:"public-token-copy",onClick:function(){b&&(navigator.clipboard.writeText(b),K(!0),setTimeout((function(){return K(!1)}),2e3))},children:Object(x.jsx)("i",{className:"far fa-copy"})}),Object(x.jsxs)("span",{children:["Public token: ",Object(x.jsx)("span",{children:b})]})]}),Object(x.jsxs)("p",{className:"text-align-center",children:["Status: ",J?"Connected":"Disconnected"]})]})]}),Object(x.jsx)("div",{id:"footer",children:Object(x.jsx)("img",{src:"built-with-taquito.png",alt:"Built with Taquito"})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(w,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[374,1,2]]]);
//# sourceMappingURL=main.f9006cd5.chunk.js.map