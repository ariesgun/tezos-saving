(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{138:function(e,t){},190:function(e,t,s){},196:function(e,t){},198:function(e,t){},261:function(e,t){},263:function(e,t){},273:function(e,t){},275:function(e,t){},287:function(e,t,s){},309:function(e,t){},311:function(e,t){},312:function(e,t){},317:function(e,t){},319:function(e,t){},338:function(e,t){},350:function(e,t){},353:function(e,t){},374:function(e,t,s){"use strict";s.r(t);var n,a=s(19),c=s.n(a),r=s(181),i=s.n(r),o=(s(190),s(17)),l=s(46),d=(s(287),s(4)),j=s(36),u=s(0),b=s.n(u),p=s(183),h=s(13),x=s(1),O=function(e){var t=e.Tezos,s=e.setContract,n=e.setWallet,c=e.setUserAddress,r=e.setUserBalance,i=e.setStorage,o=e.contractAddress,l=e.setBeaconConnection,u=e.setPublicToken,O=e.setPlayerStatus,f=e.wallet,m=function(){var e=Object(j.a)(b.a.mark((function e(n){var a,l,d,j;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(n),e.next=3,t.tz.getBalance(n);case 3:return a=e.sent,r(a.toNumber()),e.next=7,t.wallet.at(o);case 7:return l=e.sent,e.next=10,l.storage();case 10:return d=e.sent,console.log("storage ",d),s(l),i(d),e.next=16,d.players_status.get(n);case 16:j=e.sent,O(j);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.requestPermissions({network:{type:h.p.ITHACANET,rpcUrl:"https://rpc.ithacanet.teztnets.xyz"}});case 3:return e.next=5,f.getPKH();case 5:return t=e.sent,e.next=8,m(t);case 8:l(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){Object(j.a)(b.a.mark((function e(){var s,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new p.a({name:"Taquito Boilerplate",preferredNetwork:h.p.ITHACANET,disableDefaultEvents:!0,eventHandlers:(s={},Object(d.a)(s,h.e.PAIR_INIT,{handler:h.K.PAIR_INIT}),Object(d.a)(s,h.e.PAIR_SUCCESS,{handler:function(e){return u(e.publicKey)}}),s)}),t.setWalletProvider(a),n(a),e.next=5,a.client.getActiveAccount();case 5:if(!e.sent){e.next=13;break}return e.next=9,a.getPKH();case 9:return c=e.sent,e.next=12,m(c);case 12:l(!0);case 13:case"end":return e.stop()}}),e)})))()}),[]),Object(x.jsx)("div",{className:"buttons",children:Object(x.jsx)("button",{className:"button",onClick:g,children:Object(x.jsxs)("span",{children:[Object(x.jsx)("i",{className:"fas fa-wallet"}),"\xa0 Connect with wallet"]})})})},f=function(e){var t=e.wallet,s=e.setPublicToken,n=e.setUserAddress,a=e.setUserBalance,c=e.setWallet,r=e.setTezos,i=e.setBeaconConnection,o=function(){var e=Object(j.a)(b.a.mark((function e(){var o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(""),a(0),c(null),o=new l.a("https://rpc.ithacanet.teztnets.xyz"),r(o),i(!1),s(null),console.log("disconnecting wallet"),!t){e.next=15;break}return e.next=11,t.client.removeAllAccounts();case 11:return e.next=13,t.client.removeAllPeers();case 13:return e.next=15,t.client.destroy();case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"buttons",children:Object(x.jsxs)("button",{className:"button",onClick:o,children:[Object(x.jsx)("i",{className:"fas fa-times"}),"\xa0 Disconnect wallet"]})})},m=s(75),g=s.n(m),v=function(e){var t=e.contract,s=e.setUserBalance,n=e.Tezos,c=e.userAddress,r=e.setStorage,i=Object(a.useState)(!1),l=Object(o.a)(i,2),d=l[0],u=l[1],p=Object(a.useState)(!1),h=Object(o.a)(p,2),O=h[0],f=h[1],m=Object(a.useState)(!1),g=Object(o.a)(m,2),v=g[0],w=g[1],N=function(){var e=Object(j.a)(b.a.mark((function e(){var a,i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,t.storage();case 4:return a=e.sent,e.next=7,t.methods.deposit().send({amount:a.req_deposit.toNumber()/1e6});case 7:return i=e.sent,e.next=10,i.confirmation();case 10:return e.next=12,t.storage();case 12:return(o=e.sent)&&r(o),e.t0=s,e.next=17,n.tz.getBalance(c);case 17:e.t1=e.sent,(0,e.t0)(e.t1),e.next=24;break;case 21:e.prev=21,e.t2=e.catch(1),console.log(e.t2);case 24:return e.prev=24,u(!1),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[1,21,24,27]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(j.a)(b.a.mark((function e(){var a,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,e.next=4,t.methods.earlyWithdraw().send();case 4:return a=e.sent,e.next=7,a.confirmation();case 7:return e.next=9,t.storage();case 9:return(i=e.sent)&&r(i),e.t0=s,e.next=14,n.tz.getBalance(c);case 14:e.t1=e.sent,(0,e.t0)(e.t1),e.next=21;break;case 18:e.prev=18,e.t2=e.catch(1),console.log(e.t2);case 21:return e.prev=21,f(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[1,18,21,24]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(j.a)(b.a.mark((function e(){var a,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.next=4,t.methods.update().send();case 4:return a=e.sent,e.next=7,a.confirmation();case 7:return e.next=9,t.storage();case 9:return(i=e.sent)&&r(i),e.t0=s,e.next=14,n.tz.getBalance(c);case 14:e.t1=e.sent,(0,e.t0)(e.t1),e.next=21;break;case 18:e.prev=18,e.t2=e.catch(1),console.log(e.t2);case 21:return e.prev=21,w(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[1,18,21,24]])})));return function(){return e.apply(this,arguments)}}();return t||c?Object(x.jsxs)("div",{className:"buttons",children:[Object(x.jsx)("button",{className:"button",disabled:d,onClick:N,children:d?Object(x.jsxs)("span",{children:[Object(x.jsx)("i",{className:"fas fa-spinner fa-spin"}),"\xa0 Please wait"]}):Object(x.jsxs)("span",{children:[Object(x.jsx)("i",{className:"fas fa-plus"}),"\xa0 Deposit Tezos"]})}),Object(x.jsx)("button",{className:"button",disabled:O,onClick:S,children:O?Object(x.jsxs)("span",{children:[Object(x.jsx)("i",{className:"fas fa-spinner fa-spin"}),"\xa0 Please wait"]}):Object(x.jsxs)("span",{children:[Object(x.jsx)("i",{className:"fas fa-minus"}),"\xa0 Early Withdraw"]})}),Object(x.jsx)("button",{className:"button",disabled:v,onClick:T,children:v?Object(x.jsxs)("span",{children:[Object(x.jsx)("i",{className:"fas fa-spinner fa-spin"}),"\xa0 Please wait"]}):Object(x.jsxs)("span",{children:[Object(x.jsx)("i",{className:"fas fa-minus"}),"\xa0 Refresh Status"]})})]}):Object(x.jsx)("div",{children:"\xa0"})};!function(e){e.NONE="",e.LISTENING="Listening to P2P channel",e.CONNECTED="Channel connected",e.PERMISSION_REQUEST_SENT="Permission request sent, waiting for response",e.PERMISSION_REQUEST_SUCCESS="Wallet is connected"}(n||(n={}));var w=function(){var e=Object(a.useState)(new l.a("https://rpc.ithacanet.teztnets.xyz")),t=Object(o.a)(e,2),s=t[0],n=t[1],c=Object(a.useState)(void 0),r=Object(o.a)(c,2),i=r[0],d=r[1],j=Object(a.useState)(""),u=Object(o.a)(j,2),b=u[0],p=u[1],h=Object(a.useState)(null),m=Object(o.a)(h,2),w=m[0],N=m[1],S=Object(a.useState)(""),T=Object(o.a)(S,2),y=T[0],k=T[1],P=Object(a.useState)(0),A=Object(o.a)(P,2),C=A[0],B=A[1],U=Object(a.useState)(),q=Object(o.a)(U,2),_=q[0],E=q[1],I=Object(a.useState)("..."),z=Object(o.a)(I,2),W=z[0],D=z[1],R=Object(a.useState)(!1),L=Object(o.a)(R,2),H=L[0],M=L[1],K=Object(a.useState)(!1),G=Object(o.a)(K,2),J=G[0],F=G[1],Q=Object(a.useState)("transfer"),X=Object(o.a)(Q,2),Y=X[0],$=X[1],V="KT1GEMoR7HkkiWN7hSt51JdPjXPPsSdN55Mq";return!b||y&&!isNaN(C)?y&&!isNaN(C)?Object(x.jsxs)("div",{className:"main-box",children:[Object(x.jsx)("h1",{children:"Taquito Boilerplate"}),Object(x.jsx)("div",{id:"tabs",children:Object(x.jsx)("div",{id:"contract",className:"contract"===Y?"active":"",onClick:function(){return $("contract")},children:"Interact with a contract"})}),Object(x.jsxs)("div",{id:"dialog",children:[Object(x.jsxs)("div",{id:"content",children:[Object(x.jsxs)("div",{id:"increment-decrement",children:[Object(x.jsxs)("h3",{className:"text-align-center",children:["Current players: ",Object(x.jsxs)("span",{children:[_?_.players.length:0," "]})]}),Object(x.jsxs)("h3",{className:"text-align-center",children:["Your Status: ",Object(x.jsxs)("span",{children:[W?W.hasOwnProperty("winning")?"Winning":W.hasOwnProperty("waiting")?"Waiting":W.hasOwnProperty("failed")?"Failed (Missed Deadline)":W.hasOwnProperty("quit")?"Failed (Exit)":"Waiting":"Waiting..."," "]})]}),Object(x.jsx)(v,{contract:i,setUserBalance:B,Tezos:s,userAddress:y,setStorage:E})]}),Object(x.jsxs)("p",{children:["Rewards:",Object(x.jsx)("i",{className:"far fa-address-card"}),"\xa0",Object(x.jsxs)("span",{children:[_?(_.rewards.toNumber()/1e6).toLocaleString("en-US"):0," \ua729"]})]}),Object(x.jsxs)("p",{children:["Start Date:",Object(x.jsx)("i",{className:"far fa-address-card"}),"\xa0",Object(x.jsxs)("span",{children:[_?new Date(Date.parse(_.start_date)).toLocaleString("en-US"):""," "]})]}),Object(x.jsxs)("p",{children:["Rounds:",Object(x.jsx)("i",{className:"far fa-address-card"}),"\xa0",Object(x.jsxs)("span",{children:[_?_.total_rounds.toNumber():""," "]})]}),Object(x.jsxs)("p",{children:["Period Length:",Object(x.jsx)("i",{className:"far fa-address-card"}),"\xa0",Object(x.jsxs)("span",{children:[_?_.period.toNumber():""," "]})]}),Object(x.jsxs)("p",{children:["Players:",Object(x.jsx)("i",{className:"far fa-address-card"}),"\xa0 ",y]}),Object(x.jsxs)("p",{children:["Required Deposit:",Object(x.jsx)("i",{className:"far fa-address-card"}),"\xa0",Object(x.jsxs)("span",{children:[_?(_.req_deposit.toNumber()/1e6).toLocaleString("en-US"):0," \ua729"]})]}),Object(x.jsxs)("p",{children:["Total Deposit:",Object(x.jsx)("i",{className:"far fa-address-card"}),"\xa0",Object(x.jsxs)("span",{children:[_?(_.total_deposit.toNumber()/1e6).toLocaleString("en-US"):0," \ua729"]})]}),Object(x.jsxs)("p",{children:["Total Withdrawal:",Object(x.jsx)("i",{className:"far fa-address-card"}),"\xa0",Object(x.jsxs)("span",{children:[_?(_.total_withdrawal.toNumber()/1e6).toLocaleString("en-US"):0," \ua729"]})]}),Object(x.jsxs)("p",{children:["Remaining Deposit:",Object(x.jsx)("i",{className:"far fa-address-card"}),"\xa0",Object(x.jsxs)("span",{children:[_?((_.total_deposit.toNumber()-_.total_withdrawal.toNumber())/1e6).toLocaleString("en-US"):0," \ua729"]})]}),Object(x.jsxs)("p",{children:["Contract Address:",Object(x.jsx)("i",{className:"far fa-file-code"}),"\xa0",Object(x.jsx)("a",{href:"https://better-call.dev/ithacanet/".concat(V,"/operations"),target:"_blank",rel:"noopener noreferrer",children:V})]}),Object(x.jsxs)("p",{children:["User Address:",Object(x.jsx)("i",{className:"far fa-address-card"}),"\xa0 ",y]}),Object(x.jsxs)("p",{children:["User Balance:",Object(x.jsx)("i",{className:"fas fa-piggy-bank"}),"\xa0",(C/1e6).toLocaleString("en-US")," \ua729"]})]}),Object(x.jsx)(f,{wallet:w,setPublicToken:p,setUserAddress:k,setUserBalance:B,setWallet:N,setTezos:n,setBeaconConnection:F})]}),Object(x.jsx)("div",{id:"footer",children:Object(x.jsx)("img",{src:"built-with-taquito.png",alt:"Built with Taquito"})})]}):b||y||C?Object(x.jsx)("div",{children:"An error has occurred"}):Object(x.jsxs)("div",{className:"main-box",children:[Object(x.jsxs)("div",{className:"title",children:[Object(x.jsx)("h1",{children:"Taquito Boilerplate"}),Object(x.jsx)("a",{href:"https://app.netlify.com/start/deploy?repository=https://github.com/ecadlabs/taquito-boilerplate",children:Object(x.jsx)("img",{src:"https://www.netlify.com/img/deploy/button.svg",alt:"netlify-button"})})]}),Object(x.jsxs)("div",{id:"dialog",children:[Object(x.jsx)("header",{children:"Welcome to Taquito Boilerplate App!"}),Object(x.jsxs)("div",{id:"content",children:[Object(x.jsx)("p",{children:"Hello!"}),Object(x.jsxs)("p",{children:["This is a template Tezos dApp built using Taquito. It's a starting point for you to hack on and build your own dApp for Tezos.",Object(x.jsx)("br",{}),"If you have not done so already, go to the"," ",Object(x.jsx)("a",{href:"https://github.com/ecadlabs/taquito-boilerplate",target:"_blank",rel:"noopener noreferrer",children:"Taquito boilerplate Github page"})," ","and click the ",Object(x.jsx)("em",{children:'"Use this template"'})," button."]}),Object(x.jsx)("p",{children:"Go forth and Tezos!"})]}),Object(x.jsx)(O,{Tezos:s,setContract:d,setPublicToken:p,setWallet:N,setUserAddress:k,setUserBalance:B,setStorage:E,contractAddress:V,setBeaconConnection:F,setPlayerStatus:D,wallet:w})]}),Object(x.jsx)("div",{id:"footer",children:Object(x.jsx)("img",{src:"built-with-taquito.png",alt:"Built with Taquito"})})]}):Object(x.jsxs)("div",{className:"main-box",children:[Object(x.jsx)("h1",{children:"Taquito Boilerplate"}),Object(x.jsxs)("div",{id:"dialog",children:[Object(x.jsx)("header",{children:"Try the Taquito Boilerplate App!"}),Object(x.jsxs)("div",{id:"content",children:[Object(x.jsxs)("p",{className:"text-align-center",children:[Object(x.jsx)("i",{className:"fas fa-broadcast-tower"}),"\xa0 Connecting to your wallet"]}),Object(x.jsx)("div",{dangerouslySetInnerHTML:function(){var e=g()(0,"L");return e.addData(b||""),e.make(),{__html:e.createImgTag(4)}}(),className:"text-align-center"}),Object(x.jsxs)("p",{id:"public-token",children:[H?Object(x.jsx)("span",{id:"public-token-copy__copied",children:Object(x.jsx)("i",{className:"far fa-thumbs-up"})}):Object(x.jsx)("span",{id:"public-token-copy",onClick:function(){b&&(navigator.clipboard.writeText(b),M(!0),setTimeout((function(){return M(!1)}),2e3))},children:Object(x.jsx)("i",{className:"far fa-copy"})}),Object(x.jsxs)("span",{children:["Public token: ",Object(x.jsx)("span",{children:b})]})]}),Object(x.jsxs)("p",{className:"text-align-center",children:["Status: ",J?"Connected":"Disconnected"]})]})]}),Object(x.jsx)("div",{id:"footer",children:Object(x.jsx)("img",{src:"built-with-taquito.png",alt:"Built with Taquito"})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(w,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[374,1,2]]]);
//# sourceMappingURL=main.02127b14.chunk.js.map